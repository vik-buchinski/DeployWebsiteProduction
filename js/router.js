define(["admin-contacts","server-error","user-contacts","not-found","admin-albums-list","user-albums-list","fullscreenImageView","user-album-images","admin-album","user-header","user-about","admin-header","server","admin-about","local-storage","sign-in-view","view-loader","constants","backbone"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s=Backbone.Router.extend({routes:{"":"userHome",home:"userHome",about:"userAbout",bouquets:"userBouquets","albums/:albumType":"userAlbumsList","album/:albumId":"userAlbum",contacts:"userContacts",admin:"adminHome","admin/signIn":"signIn","admin/bouquets":"adminBouquets","admin/albums/:albumType":"adminAlbumsList","admin/album/:albumId":"adminAlbum","admin/contacts":"adminContacts",serverError:"serverError","*notFound":"notFound",notFound:"notFound"},notFound:function(){window.isAdminPart=!1,window.isUserPart=!1,d.init(),q(r.PAGE_TEMPLATES_DATA.NOT_FOUND,function(){$("#pages-container").html((new app.views.NotFound).render().$el.i18n())})},serverError:function(){window.isAdminPart=!1,window.isUserPart=!1,b.init(),q(r.PAGE_TEMPLATES_DATA.SERVER_ERROR,function(){$("#pages-container").html((new app.views.ServerError).render().$el.i18n())})},userHome:function(){this.userAbout()},userAbout:function(){var a=this;m.getUserAbout(function(b){a.buildView(k,r.PAGE_TEMPLATES_DATA.USER.ABOUT,{data:b},!0,!1,$.i18n.t("user.about.title"),r.USER_TABS.about,b.title_image_url)})},userBouquets:function(){var a=this;m.getBouquetsAlbum(function(b){a.buildView(h,r.PAGE_TEMPLATES_DATA.USER.ALBUM_IMAGES,{data:b},!0,!1,$.i18n.t("user.bouquets.title"),r.USER_TABS.bouquets)})},userAlbum:function(a){var b=this;m.getAlbumById(a,function(a){b.buildView(h,r.PAGE_TEMPLATES_DATA.USER.ALBUM_IMAGES,{data:a},!0,!1,$.i18n.t("user."+r.USER_TABS[a.album_type.toLowerCase()]+".title"),r.USER_TABS[a.album_type.toLowerCase()])})},userAlbumsList:function(a){if(!r.ALBUM_TYPES[a.toLowerCase()])return alert($.i18n.t("album-type-missing-message")),!1;var b=this;m.getAlbumByType(a,function(c){b.buildView(f,r.PAGE_TEMPLATES_DATA.USER.ALBUMS_LIST,{data:c},!0,!1,$.i18n.t("user."+r.USER_TABS[a.toLowerCase()]+".title"),r.USER_TABS[a.toLowerCase()])})},userContacts:function(){var a=this,b=function(b){a.buildView(c,r.PAGE_TEMPLATES_DATA.USER.CONTACTS,{data:b},!0,!1,$.i18n.t("user.contacts.title"),r.USER_TABS.contacts)};m.getContactsDescription(b,b)},signIn:function(){p.init(),q(r.PAGE_TEMPLATES_DATA.ADMIN.SIGN_IN,function(){$("#pages-container").html((new app.views.SignIn).render().$el.i18n())})},adminHome:function(){this.adminAbout()},adminAbout:function(){var a=o.getSession();if(null!=a){var b=this;m.getAdminAbout(a.session.token,function(a){b.buildView(n,r.PAGE_TEMPLATES_DATA.ADMIN.ABOUT,{about_data:a},!1,!0)})}else window.app.router.navigate("admin/signIn",!0)},adminBouquets:function(){var a=o.getSession();if(null!=a){var b=this;m.getAdminBouquetsImages(a.session.token,function(a){b.buildView(i,r.PAGE_TEMPLATES_DATA.ADMIN.ALBUM,{album_data:a,title:$.i18n.t("admin.bouquets-page.page-title"),selected_page:r.LEFT_PANELS.bouquets},!1,!0)})}else window.app.router.navigate("admin/signIn",!0)},adminAlbumsList:function(a){var b=o.getSession();if(null!=b){var c=this;if(!r.ALBUM_TYPES[a.toLowerCase()])return alert($.i18n.t("album-type-missing-message")),!1;m.getAdminAlbumsList(b.session.token,a,function(b){c.buildView(e,r.PAGE_TEMPLATES_DATA.ADMIN.ALBUMS_LIST,{album_data:b,title:$.i18n.t("admin."+r.LEFT_PANELS[a.toLowerCase()]+".page-title"),album_type:r.LEFT_PANELS[a.toLowerCase()]},!1,!0)})}else window.app.router.navigate("admin/signIn",!0)},adminAlbum:function(a){var b=o.getSession();if(null!=b){var c=this;m.getAdminAlbumById(b.session.token,a,function(a){var b=null,d=null;a.album_type&&(a.album_type=a.album_type.toLowerCase(),b=$.i18n.t("admin."+a.album_type+".page-title"),d=r.LEFT_PANELS[a.album_type]),c.buildView(i,r.PAGE_TEMPLATES_DATA.ADMIN.ALBUM,{album_data:a,title:b,selected_page:d},!1,!0)})}else window.app.router.navigate("admin/signIn",!0)},adminContacts:function(){var b=o.getSession();if(null!=b){var c=this;m.getContactsDescription(function(b){c.buildView(a,r.PAGE_TEMPLATES_DATA.ADMIN.CONTACTS,{data:b,title:$.i18n.t("admin.contacts-page.page-title"),selected_page:r.LEFT_PANELS.contacts},!1,!0)})}else window.app.router.navigate("admin/signIn",!0)},buildView:function(a,b,c,d,e,f,h,i){window.isUserPart!=d&&d?(j.init(),q(r.PAGE_TEMPLATES_DATA.USER.HEADER,function(){$("#pages-container").html(new app.views.UserHeader({page_name:f,tab_name:h,title_img_url:i}).render().$el.i18n()),g.init(),new app.views.FullscreenImageView({el:$(".fsbox")}).render(),a.init(),q(b,function(){$("section.page .container").html(new app.views[b.view_name](c).render().$el.i18n())})})):window.isUserPart==d&&d&&($(".fsbox").hide(),$("body").hasClass("fsbox-active")&&$("body").removeClass("fsbox-active"),window.Vent.trigger("changeHeaderActiveTab",{tab_name:h}),i?($("div.parallax-banner").show(),$("div.parallax-banner").css("background-image","url("+i+")")):$("div.parallax-banner").hide(),a.init(),q(b,function(){$("section.page h1.title span").html(f),$("section.page .container").html(new app.views[b.view_name](c).render().$el.i18n())})),e&&(a.init(),q(b,function(){l.init(),q(r.PAGE_TEMPLATES_DATA.ADMIN.HEADER,function(){var a=new app.views[b.view_name](c).render().$el.i18n();a.prepend((new app.views.AdminHeader).render().$el.i18n()),$("#pages-container").html(a)})})),window.isAdminPart=e,window.isUserPart=d}});return s});
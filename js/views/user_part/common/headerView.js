define(["sub-menu","constants"],function(a,b){return{init:function(){window.app.views.UserHeader||(window.app.views.UserHeader=Backbone.View.extend({sub:null,initialize:function(a){this.page_name=a.page_name,this.tab_name=a.tab_name,this.title_img_url=a.title_img_url,this.listenTo(window.Vent,"changeHeaderActiveTab",this.renderMenu),_.bindAll(this)},render:function(){var a={page_name:this.page_name,title_img_url:this.title_img_url};return this.setElement(this.template(a)),this.renderMenu(),this},events:{"mouseover .menu-item":"open","click ul > .menu-item > a":"click"},renderMenu:function(a){a||(a={});var c=this;$(this.$el).find("nav.menu").html(c.HeaderMenu({tab_name:a.tab_name||c.tab_name,all_tabs:b.USER_TABS}))},click:function(a){var b=$(a.currentTarget);b.parents(".menu-item").find(".sub-menu").length?a.preventDefault():(_.each($("header li.menu-item"),function(a){$(a).hasClass("active")&&$(a).removeClass("active")}),b.parent().addClass("active"))},open:function(b){var c=$(b.currentTarget),d=c.find(".sub-menu");this.sub&&!this.sub.$el.eq(d)&&(this.sub.hide(),this.sub.unbind()),this.sub=new a({el:d}),this.sub.show()}}))}}});